var _=Object.defineProperty;var S=(o,e,t)=>e in o?_(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var u=(o,e,t)=>(S(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const l=24,f=1,y=Math.floor(window.innerHeight/l)-10,p=Math.floor(window.innerWidth/l);class E{constructor(){u(this,"_displayData",[]);u(this,"_delta",500);u(this,"isRunning",!1);u(this,"fuzziness",0);u(this,"onNextTick");this._displayData=this.getBoardDisplayData();let e=new Date().getTime();const t=()=>{requestAnimationFrame(t);var n=new Date().getTime();n-e>=this._delta&&(this.tick(),e=n)};t()}set speed(e){this._delta=(100-e)*10}render(e){const t=p*l+f*2,n=y*l+f*2,s=r=>{var d;if(this.isRunning||this.isOutOfBounds(r))return;const h=(d=this._displayData[r.x][r.y])==null?void 0:d.alive;this.setIsAlive(r,!h)};let i={x:-1,y:-1};const a=r=>i.x===r.x&&i.y===r.y?!1:(i={...r},!0);d3.select(e).append("svg").attr("width",`${t}px`).attr("height",`${n}px`).on("mousemove touchmove",function(){if(d3.event.preventDefault(),d3.event.type==="mousemove"&&!d3.event.ctrlKey)return;const[r,h]=d3.mouse(this),d={x:Math.ceil(h/l)-1,y:Math.ceil(r/l)-1};a(d)&&s(d)}).selectAll(".row").data(this._displayData).enter().append("g").attr("class","row").append("g").attr("class","column").selectAll(".square").data(function(r){return r}).enter().append("rect").attr("class","square").attr("id",function(r){return`c-${r.coord.x}-${r.coord.y}`}).attr("x",function(r){return r.x}).attr("y",function(r){return r.y}).attr("width",function(r){return r.width}).attr("height",function(r){return r.height}).style("fill","transparent").style("stroke","#000").on("click",r=>s(r.coord))}reset(){this.isRunning=!1,this._displayData.forEach(e=>e.forEach(t=>{this.setIsAlive(t.coord,!1)}))}tick(){var t;if(!this.isRunning)return;let e=!0;for(let n=0;n<this._displayData.length;n++)for(let s=0;s<this._displayData[n].length;s++){const i=this._displayData[n][s],a=this.countNeighbors(this._displayData,i.coord);i.alive&&[2,3].includes(a)||!i.alive&&[3].includes(a)?(e=!1,this.setIsAlive(i.coord,!0)):this.setIsAlive(i.coord,!1)}(t=this.onNextTick)==null||t.call(this,e)}setIsAlive(e,t){this._displayData[e.x][e.y].alive=t,d3.select(`#c-${e.x}-${e.y}`).transition().duration(this.fuzziness).style("fill",t?"gold":"transparent")}countNeighbors(e,{x:t,y:n}){let s=0;const i=a=>{!this.isOutOfBounds(a)&&e[a.x][a.y].alive&&s++};return[{x:t-1,y:n+0},{x:t-1,y:n+1},{x:t+0,y:n+1},{x:t+1,y:n+1},{x:t+1,y:n+0},{x:t+1,y:n-1},{x:t+0,y:n-1},{x:t-1,y:n-1}].forEach(a=>i(a)),s}isOutOfBounds(e){return e.x<0||e.x>y-1||e.y<0||e.y>p-1}getBoardDisplayData(){const e=[];let t=f,n=f;for(let s=0;s<y;s++){e.push([]);for(let i=0;i<p;i++)e[s].push({x:t,y:n,width:l,height:l,alive:!1,coord:{x:s,y:i}}),t+=l;t=f,n+=l}return e}}const g=document.querySelector("#start"),O=document.querySelector("#reset"),m=document.querySelector("#speed"),v=document.querySelector("#fuzziness"),c=new E;let x=0;c.render("#game");c.onNextTick=o=>{D(++x),o&&w(!1)};g.addEventListener("click",()=>{c.isRunning||L(),w(!c.isRunning)});O.addEventListener("click",()=>{c.reset(),L()});m.addEventListener("input",()=>{c.speed=Number(m.value)});v.addEventListener("input",()=>{c.fuzziness=Number(v.value)*10});function w(o){c.isRunning=o,o?g.classList.add("active"):g.classList.remove("active")}function D(o){document.querySelector("#status").innerHTML=`Generations: ${o}`}function L(){w(!1),x=0,c.speed=50,c.fuzziness=0,D(x),m.value="50",v.value="0"}
